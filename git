#!/bin/sh
ps=$(ps -o stat= -p $PPID)

if [ $ps != "S+" ]; then
	before_sha=$(git rev-parse --verify HEAD)
fi

# ** Change the path to your original git **
# /usr/bin/git $@
/usr/bin/git $@

if [ $ps != "S+" ]; then
	timestamp=$(date +"%Y%m%d-%H%M%S")
	after_sha=$(git rev-parse --verify HEAD)
	echo "$timestamp, $(pwd), $@, $before_sha, $after_sha" >> $HOME/.git_history
fi
